import streamlit as st
import numpy as np
import matplotlib.pyplot as plt
import math

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ —Å –∫–æ—Ä–Ω—è–º–∏
def find_intervals(f, x_min, x_max, step=0.1):
    intervals = []
    x = x_min
    while x < x_max:
        try:
            f1 = f(x)
            f2 = f(x + step)
            if f1 * f2 < 0:
                intervals.append((x, x + step))
        except: pass
        x += step
    return intervals

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —á–∏—Å–ª–µ–Ω–Ω–æ–≥–æ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä–æ–≤–∞–Ω–∏—è
def numerical_derivative(f, x, h=1e-5):
    try: 
        return (f(x + h) - f(x - h)) / (2 * h)
    except:
        return None

# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ –ø—Ä–æ—Å—Ç–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Å —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏
def simple_iteration(g, x0, epsilon, max_iter):
    x_prev = x0
    iterations = [x0]
    errors = []  # –û—à–∏–±–∫–∏ |x_{k} - x_{k-1}|
    derivatives = []  # –ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ
    
    for _ in range(max_iter):
        try:
            x_next = g(x_prev)
        except Exception as e:
            return None, None, None, None, f"–û—à–∏–±–∫–∞: {str(e)}"
        
        # –í—ã—á–∏—Å–ª—è–µ–º –æ—à–∏–±–∫—É
        error = abs(x_next - x_prev)
        errors.append(error)
        iterations.append(x_next)
        
        # –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é –≤ —Ç–µ–∫—É—â–µ–π —Ç–æ—á–∫–µ
        deriv = numerical_derivative(g, x_prev)
        derivatives.append(abs(deriv) if deriv is not None else 0)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—Ä–∏—Ç–µ—Ä–∏–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
        if error < epsilon:
            break
            
        x_prev = x_next
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º q = max|g'(x)| –Ω–∞ –≤—Å–µ–º –ø—É—Ç–∏
    q = max(derivatives) if derivatives else 0
    
    # –í—ã—á–∏—Å–ª—è–µ–º –æ—Ü–µ–Ω–∫—É –æ—à–∏–±–∫–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–µ |x_k - x*| ‚â§ q/(1-q) * |x_k - x_{k-1}|
    error_estimate = None
    if len(errors) > 0 and q < 1:
        error_estimate = q / (1 - q) * errors[-1]
    
    return iterations, errors, derivatives, q, error_estimate

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
st.set_page_config(page_title="–ú–µ—Ç–æ–¥ –ø—Ä–æ—Å—Ç–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏", layout="wide")
st.title("üîç –†–µ—à–µ–Ω–∏–µ –Ω–µ–ª–∏–Ω–µ–π–Ω—ã—Ö —É—Ä–∞–≤–Ω–µ–Ω–∏–π (–º–µ—Ç–æ–¥ –ø—Ä–æ—Å—Ç–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏)")

# –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å
with st.sidebar:
    st.header("–í–≤–æ–¥ —É—Ä–∞–≤–Ω–µ–Ω–∏—è")
    
    # –ü–æ–ª–µ –¥–ª—è f(x) = 0
    f_str = st.text_input("f(x) = 0", value="x + math.cos(x) - 2")
    st.caption("–ü—Ä–∏–º–µ—Ä—ã: x + math.cos(x) - 2, x**2 - 2, math.exp(x) - x - 2")
    
    # –ü–æ–ª–µ –¥–ª—è g(x) = x
    g_str = st.text_input("–§—É–Ω–∫—Ü–∏—è g(x) (x = g(x))", value="2 - math.cos(x)")
    st.caption("–ü—Ä–∏–º–µ—Ä—ã: 2 - math.cos(x), (x + 2/x)/2, math.log(x + 2)")
    
    x0 = st.number_input("–ù–∞—á–∞–ª—å–Ω–æ–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ x0", 0.5, step=0.1)
    st.caption("–ú–æ–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ")
    
    # –ü–æ–ª–µ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏
    epsilon_str = st.text_input("–¢–æ—á–Ω–æ—Å—Ç—å (epsilon)", value="1e-6")
    st.caption("–í–≤–µ–¥–∏—Ç–µ —Ç–æ—á–Ω–æ—Å—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ: 0.001, 1e-3, 1e-6 –∏ —Ç.–¥.")
    
    max_iter = st.slider("–ú–∞–∫—Å. –∏—Ç–µ—Ä–∞—Ü–∏–π", 10, 1000, 100)
    
    col1, col2 = st.columns(2)
    with col1: find_intervals_btn = st.button("–ù–∞–π—Ç–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã")
    with col2: study_convergence_btn = st.button("–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏")
    
    st.info("–í–∞–∂–Ω–æ: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ª–æ–≤–∏–µ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ |g'(x)| < 1")

# –ö–Ω–æ–ø–∫–∞ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"
if st.sidebar.button("–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"):
    try:
        # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏–∑ —Å—Ç—Ä–æ–∫–∏ –≤ —á–∏—Å–ª–æ
        try:
            epsilon = float(epsilon_str)
        except ValueError:
            if 'e' in epsilon_str.lower():
                parts = epsilon_str.lower().split('e')
                if len(parts) == 2:
                    base = float(parts[0])
                    exponent = int(parts[1])
                    epsilon = base * (10 ** exponent)
                else:
                    raise ValueError("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏")
            else:
                raise ValueError("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏")
        
        if epsilon <= 0:
            raise ValueError("–¢–æ—á–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º")
        if epsilon < 1e-15:
            st.warning("‚ö†Ô∏è –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (–º–µ–Ω—å—à–µ 1e-15) –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—é")
        
        # –°–æ–∑–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ f(x) –∏ g(x)
        f = lambda x: eval(f_str, {"math": math, "np": np}, {"x": x})
        g = lambda x: eval(g_str, {"math": math, "np": np}, {"x": x})
        
        # –ü–æ–∏—Å–∫ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤
        intervals = find_intervals(f, x0-5, x0+5)
        
        # –í—ã–ø–æ–ª–Ω—è–µ–º –º–µ—Ç–æ–¥ –ø—Ä–æ—Å—Ç–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
        iterations, errors, derivatives, q, error_estimate = simple_iteration(g, x0, epsilon, max_iter)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏
        if iterations is None or errors is None:
            raise Exception(error_msg)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        convergence_condition = "‚úÖ –£—Å–ª–æ–≤–∏–µ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è" if q < 1 else "‚ö†Ô∏è –£—Å–ª–æ–≤–∏–µ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è"
        convergence_status = "–°—Ö–æ–¥–∏—Ç—Å—è" if q < 1 else "–ù–µ —Å—Ö–æ–¥–∏—Ç—Å—è"
        
        # –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        st.subheader("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π")
        col1, col2 = st.columns(2)
        
        with col1:
            st.metric("–ö–æ—Ä–µ–Ω—å", f"{iterations[-1]:.10f}")
            st.metric("–ò—Ç–µ—Ä–∞—Ü–∏–π", len(iterations)-1)
            st.metric("–¢–æ—á–Ω–æ—Å—Ç—å", f"{abs(iterations[-1]-iterations[-2]):.2e}")
        
        with col2:
            st.metric("g(x)", f"{g(iterations[-1]):.10f}")
            st.metric("–°—Ö–æ–¥–∏–º–æ—Å—Ç—å", convergence_status)
            st.metric("q = max|g'(x)|", f"{q:.6f}")
        
        # –í—ã–≤–æ–¥ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–∏ –æ—à–∏–±–∫–∏
        if q < 1 and error_estimate is not None:
            st.subheader("üîç –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –æ—à–∏–±–∫–∏")
            st.info(f"–ü–æ —Ç–µ–æ—Ä–µ–º–µ: |x_k - x*| ‚â§ q/(1-q) * |x_k - x_{k-1}|")
            st.info(f"q = {q:.6f}, –ø–æ—ç—Ç–æ–º—É |x_k - x*| ‚â§ {error_estimate:.2e}")
        else:
            st.warning("‚ö†Ô∏è –£—Å–ª–æ–≤–∏–µ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –æ—à–∏–±–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞")
        
        # –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã
        st.subheader("üîç –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã —Å –∫–æ—Ä–Ω—è–º–∏")
        if intervals:
            for i, (a, b) in enumerate(intervals):
                st.write(f"–ò–Ω—Ç–µ—Ä–≤–∞–ª {i+1}: [{a:.4f}, {b:.4f}]")
        else:
            st.warning("–ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")
        
        # –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        st.subheader("üìä –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏")
        fig, ax = plt.subplots(figsize=(10, 6))
        x_min, x_max = min(iterations)-1, max(iterations)+1
        x_vals = np.linspace(x_min, x_max, 1000)
        y_g = [g(x) for x in x_vals]
        y_x = x_vals
        
        ax.plot(x_vals, y_g, 'b-', label='y = g(x)')
        ax.plot(x_vals, y_x, 'r--', label='y = x')
        
        for i in range(len(iterations)-1):
            ax.plot([iterations[i], iterations[i+1]], [iterations[i], iterations[i]], 'g-', alpha=0.8)
            ax.plot([iterations[i+1], iterations[i+1]], [iterations[i], iterations[i+1]], 'g-', alpha=0.8)
        
        ax.scatter(iterations, iterations, color='red', s=50)
        ax.set_xlabel('x'); ax.set_ylabel('y'); ax.grid(True); ax.legend()
        st.pyplot(fig)
        
        # –ì—Ä–∞—Ñ–∏–∫ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        st.subheader("üìà –ì—Ä–∞—Ñ–∏–∫ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏")
        fig2, ax2 = plt.subplots(figsize=(10, 6))
        ax2.plot(range(len(errors)), np.log10(errors), 'bo-')
        ax2.set_xlabel('–ù–æ–º–µ—Ä –∏—Ç–µ—Ä–∞—Ü–∏–∏'); ax2.set_ylabel('log10(–æ—à–∏–±–∫–∞)'); ax2.grid(True)
        
        # –î–æ–±–∞–≤–ª—è–µ–º –ª–∏–Ω–∏—é, –ø–æ–∫–∞–∑—ã–≤–∞—é—â—É—é –æ—Ü–µ–Ω–∫—É –æ—à–∏–±–∫–∏
        if q < 1 and error_estimate is not None:
            estimated_error = q / (1 - q) * np.array(errors)
            ax2.plot(range(len(estimated_error)), np.log10(estimated_error), 'r--', 
                    label=f'–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞\nq/(1-q)*|x_k - x_{k-1}|')
            ax2.legend()
        
        st.pyplot(fig2)
        
        # –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏
        if study_convergence_btn:
            st.subheader("üìä –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∏—Ç–µ—Ä–∞—Ü–∏–π –æ—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏")
            epsilons = [10**(-i) for i in range(2, 11)]
            iters = []
            for eps in epsilons:
                _, _, _, q_val, _ = simple_iteration(g, x0, eps, max_iter)
                if q_val is not None and q_val < 1:
                    iters.append(len(_) - 1)
            
            fig3, ax3 = plt.subplots(figsize=(10, 6))
            ax3.plot(np.log10(epsilons), iters, 'go-')
            ax3.set_xlabel('log10(—Ç–æ—á–Ω–æ—Å—Ç—å)'); ax3.set_ylabel('–ß–∏—Å–ª–æ –∏—Ç–µ—Ä–∞—Ü–∏–π'); ax3.grid(True)
            
            # –î–æ–±–∞–≤–ª—è–µ–º –ª–∏–Ω–∏—é, –ø–æ–∫–∞–∑—ã–≤–∞—é—â—É—é —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
            # –î–ª—è –ª–∏–Ω–µ–π–Ω–æ–π —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —á–∏—Å–ª–æ –∏—Ç–µ—Ä–∞—Ü–∏–π k ‚âà log(epsilon)/log(q)
            if q < 1:
                theoretical_iters = [-np.log(eps)/np.log(q) for eps in epsilons]
                ax3.plot(np.log10(epsilons), theoretical_iters, 'r--', 
                        label=f'–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å\nlog(epsilon)/log({q:.2f})')
                ax3.legend()
            
            st.pyplot(fig3)
    
    except Exception as e:
        st.error(f"‚ùå –û—à–∏–±–∫–∞: {str(e)}")
        st.markdown("""
        **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
        - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ g(x)
        - –ù–∞—á–∞–ª—å–Ω–æ–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ
        - –§–æ—Ä–º–∞—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 1e-6, 0.000001 –∏ —Ç.–¥.)
        - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, arccos –æ—Ç —á–∏—Å–ª–∞ >1)
        """)
        st.code("""
        –ü—Ä–∏–º–µ—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:
        - –î–ª—è x + cos(x) = 2: 2 - math.cos(x)
        - –î–ª—è x^2 - 2 = 0: (x + 2/x)/2
        - –î–ª—è x^3 - x - 1 = 0: (x + 1)**(1/3)
        """)

# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
st.markdown("""
---
## üìö –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã –º–µ—Ç–æ–¥–∞ –ø—Ä–æ—Å—Ç–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏

### üîë –£—Å–ª–æ–≤–∏–µ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏
**|œÜ'(x)| ‚â§ q < 1**  
–≠—Ç–æ –∫–ª—é—á–µ–≤–æ–µ —É—Å–ª–æ–≤–∏–µ, –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–µ—Ç–æ–¥ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å—Ö–æ–¥–∏—Ç—Å—è.  
- **q** ‚Äî –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –õ–∏–ø—à–∏—Ü–∞, –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏  
- –ß–µ–º –º–µ–Ω—å—à–µ q, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ —Å—Ö–æ–¥–∏—Ç—Å—è –º–µ—Ç–æ–¥  
- –ï—Å–ª–∏ q ‚â• 1, –º–µ—Ç–æ–¥ —Ä–∞—Å—Ö–æ–¥–∏—Ç—Å—è

### ‚è≠ –ö—Ä–∏—Ç–µ—Ä–∏–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
**|x_{k+1} - x_k| < Œµ**  
–ò—Ç–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ–∫—Ä–∞—â–∞—é—Ç—Å—è, –∫–æ–≥–¥–∞ —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏—è–º–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–Ω—å—à–µ –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏.

### üìê –û—Ü–µ–Ω–∫–∞ –æ—à–∏–±–∫–∏ –ø–æ—Å–ª–µ k-–≥–æ —à–∞–≥–∞
**|x_k - x*| ‚â§ q/(1-q) * |x_k - x_{k-1}|**  
–≠—Ç–∞ —Ñ–æ—Ä–º—É–ª–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ x_k –±–ª–∏–∑–∫–æ –∫ –∏—Å—Ç–∏–Ω–Ω–æ–º—É —Ä–µ—à–µ–Ω–∏—é x*.

### üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ
1. **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ q**  
   –ü—Ä–æ–≥—Ä–∞–º–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç q –∫–∞–∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |g'(x)| –Ω–∞ –≤—Å–µ–º –ø—É—Ç–∏ –∏—Ç–µ—Ä–∞—Ü–∏–π

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏**  
   –ï—Å–ª–∏ q ‚â• 1, –º–µ—Ç–æ–¥ –Ω–µ —Å–æ–π–¥–µ—Ç—Å—è

3. **–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –æ—à–∏–±–∫–∏**  
   –ü–æ —Ñ–æ—Ä–º—É–ª–µ –≤—ã—à–µ, –µ—Å–ª–∏ q < 1

4. **–ì—Ä–∞—Ñ–∏–∫ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏**  
   –°–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫—É—é –æ—Ü–µ–Ω–∫—É –æ—à–∏–±–∫–∏ (–∫—Ä–∞—Å–Ω–∞—è –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –ª–∏–Ω–∏—è)

### üìå –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–î–ª—è —É—Ä–∞–≤–Ω–µ–Ω–∏—è **x + cos(x) = 2**:
- f(x) = x + math.cos(x) - 2
- g(x) = 2 - math.cos(x)
- –ù–∞—á–∞–ª—å–Ω–æ–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ x0 = 0.5 (–º–æ–∂–Ω–æ –≤–∑—è—Ç—å –ª—é–±–æ–µ)
- –¢–æ—á–Ω–æ—Å—Ç—å epsilon = 1e-6

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- q ‚âà 0.15 (—É—Å–ª–æ–≤–∏–µ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è)
- –û—Ü–µ–Ω–∫–∞ –æ—à–∏–±–∫–∏: |x_k - x*| ‚â§ 0.17 * |x_k - x_{k-1}|

### üìå –°–æ–≤–µ—Ç—ã
- –ï—Å–ª–∏ q –±–ª–∏–∑–∫–æ –∫ 1 (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.9), –º–µ—Ç–æ–¥ —Å—Ö–æ–¥–∏—Ç—Å—è –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ
- –ï—Å–ª–∏ q > 1, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è
- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —É—Å–ª–æ–≤–∏–µ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–µ—Ç–æ–¥–∞

> üí° **–í–∞–∂–Ω–æ:** –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –æ—à–∏–±–∫–∏ –¥–∞–µ—Ç –≤–µ—Ä—Ö–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏, —Ä–µ–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ.
""")
